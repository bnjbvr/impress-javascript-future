<!doctype html>
<html>
    <head>
        <title>The Future of JavaScript</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="highlight-styles/googlecode.css">
        <link href="style.css" rel="stylesheet" />
    </head>
    <body>

        <div id="impress">

            <div id='title'>
                <h1>The future of Javascript.</h1>
                <h2>EcmaScript 6 and even more</h2>
            </div>

            <div class="step" data-x="700" data-y="-300" data-scale="0.5">
            </div>

            <div class="step" data-x="800" data-y="170" data-scale="0.7">
                <h1 style='margin-bottom:50px;'>About us</h1>
                <h2 style='margin-bottom:300px;'>Hannes Verschore</h2>
                <h2>Benjamin Bouvier</h2>
            </div>
            <div class="step" data-x="600" data-y="200" data-scale="0.3">
                <div style='position:relative; height:500px;'>
                    <img src='img/bruges.jpg' class='substep' style='position:absolute;top:50px; right:0px;'/>
                    <p class='large substep' style='position:absolute;top:50px;left:50%'>JS Dev</p>
                    <img src='img/js-perf.png' class='substep' style='position:absolute;top:50px; left:0px;' />
                    <div class='substep' style='position:absolute;top:300px;'>
                        <img src='img/firefox.png' style='width:100px;' />
                        Platform engineer on JS engine.
                    </div>
                    <div class='substep' style='position:absolute;top:50px;' >
                        <img src='img/awfy.png' />
                        Maintainer of AreWeFastYet
                    </div>
                </div>

            </div>

            <div class="step" data-x="600" data-y="450" data-scale="0.3">
                ...
            </div>

            <div id='es6-list' class="step" data-x="1500" data-y="280" data-scale="0.7">
                <h1>EcmaScript 6.0</h1>

                <ul>
                <li><h2>ES6: Generators</h2></li>
                <li><h2>ES6: Classes</h2></li>
                <li><h2>ES6: Arrow functions</h2></li>
                <li><h2>ES6: Destructuring</h2></li>
                <li><h2>ES6: Modules</h2></li>
                <li><h2>ES6: Symbols</h2></li>
                <li><h2>ES6: Promises</h2></li>
                </ul>

            </div>

            <div class="step" data-x="1400" data-y="30" data-scale="0.3">
<p>EcmaScript 6.0 finalisation is for XXXX</p>
<p>A lot of functionality is already available in different browsers</p>
<p>Es6 to ES5 compilers: Traceur  or 6to5 + core-js</p>
<img src='img/traceur.svg' width='50px'>
            </div>

            <div class="step" data-x="1305" data-y="105" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Generators</h1>
                <hr />

                <p>PLACEHOLDER: With ES6 generators, we have a different kind of function,
                   which may be paused in the middle, one or many times,
                   and resumed later, allowing other code to run during these
                   paused periods.</p>

                <img src='' height='250px' width='700px'/>

                <p>PLACEHOLDER: A generator generates values until no values are available anymore</p>

            </div>

            <div class="step" data-x="1330" data-y="105" data-scale="0.05" data-rotate="-90">
                <h2>Syntax</h2>

<div class='substep'>
    <p class='middle center blue' style=''>Star: indicates a generator function</p>
</div>
<div style='position:relative'>
<pre><code class="javascript">function *foo() {
    // ...
    yield "bar1";
    // ...
    yield "bar2";
    // ...
}</code></pre>
<div class='substep'>
    <p class='middle center blue'>Yield: pauses the function</p>
</div>
</div>

            </div>
            <div class="step usage" data-x="1350" data-y="105" data-scale="0.05" data-rotate="-90">
            <h2>Usage</h2>

<pre><code class="javascript">function *foo() {
    console.log("running");
}

foo();</code></pre>

<p class='middle blue center substep'>Nothing happens!</p>

            </div>

            <div class="step usage" data-x="1370" data-y="105" data-scale="0.05" data-rotate="-90">
            <h2>Usage</h2>

<pre><code class="javascript">function *foo() {
    console.log("running");
}

var generator = foo();</code></pre>

<pre><code class="javascript">// generator = { next: function() { ... }, throw: function() { ... }};</code></pre>

            </div>

            <div class="step usage" data-x="1400" data-y="105" data-scale="0.05" data-rotate="-90">
            <h2>Usage</h2>

<pre><code class="javascript">function *foo() {
    console.log("running");
    var x = yield 1;
    var y = yield 2;
    return 3;
}

var generator = foo();<span class='substep'>

var result1 = generator.next();</span><span class='substep'>
// console: "running"</span><span class='substep'>
// result1 = {value: 1, done: false}</span><span class='substep'>

var result2 = generator.next();</span><span class='substep'>
// result2 = {value: 2, done: false}</span><span class='substep'>

var result3 = generator.next();</span><span class='substep'>
// result3 = {value: 3, done: true}</span></code></pre>
            </div>

            <div class="step usage" data-x="1430" data-y="105" data-scale="0.05" data-rotate="-90">
            <h2>Usage</h2>

<pre><code class="javascript">function *foo() {
    var x = yield 1;
    var y = yield 2;
    return x + y;
}

var generator = foo();<span class='substep'>

var result1 = generator.next();</span><span class='substep'>
// result1 = {value: 1, done: false}</span><span class='substep'>

var result2 = generator.next(10);</span><span class='substep'>
// result2 = {value: 2, done: false}</span><span class='substep'>

var result3 = generator.next(20);</span><span class='substep'>
// result3 = {value: 30, done: true}</span></code></pre>
            </div>

            <div class="step example" data-x="1470" data-y="105" data-scale="0.05" data-rotate="-90">
                <h3>Example 1: Iteration</h3>
<pre><code class="javascript">function *range(start, end) {
    while (start != end) {
        yield start;
        start++;
    }
}</code></pre>
<div class='substep'>
<h4>Usage</h4>
<pre><code class="javascript">for (let i of range(0, 10)) {
    console.log(i);
}</code></pre>
</div>
<div class='substep'>
<h4>Result</h4>
<pre><code class="javascript">> 0
> 1
> 2
> 3
> 4
> 5
> 6
> 7
> 8
> 9
</code></pre>
</div>

            </div>
            <div class="step example" data-x="1520" data-y="105" data-scale="0.05" data-rotate="-90">
                <h3>Example 2: Fibonacci</h3>
<pre><code class="javascript">function *fibonacci() {
    var prev = 0, cur = 1;
    while (true) {
        let sum = cur + prev;
        yield sum;
        prev = cur
        cur = sum
    }
}</code></pre>

<div class='substep'>
<h4>Usage</h4>
<pre><code class="javascript">for (let n of fibonacci) {
    if (n > 1000)
        break;
    console.log(n);
}</code></pre>
</div>

<div class='substep'>
<h4>Result</h4>
<pre><code class="javascript">> 0
> 1
> 1
> 2
> 3
> 5
> 8
...
</code></pre>
</div>
            </div>

            <div class="step example" data-x="1550" data-y="105" data-scale="0.05" data-rotate="-90">
                <h3>Generators: compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> 26
                <td><img src='img/chrome.png'> 39
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> 26
                <td><img src='img/safari.png'>n/a
                <tr class='notes'>
                <td>Released 14 months ago <!-- December 10, 2013 -->
                <td>Released 3 months ago <!-- 2014-11-18 -->
                <td>
                <td>Released 2 months ago <!-- December 3, 2014 -->
                </table>
            </div>

            <div class="step" data-x="1305" data-y="180" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Classes</h1>
                <hr />
                <br />&nbsp;<br />
                <br />&nbsp;<br />
                <img src="img/classes-in-js.png" />
                <br />&nbsp;<br />
                <img src="img/inheritance-in-js.png" />
                <br />&nbsp;<br />
                <img src="img/extend-in-js.png" />
            </div>

            <div class="step" data-x="1345" data-y="180" data-scale="0.05" data-rotate="-90">

<h2 class='blue bold center'>Prototype based !!</h2>
<pre><code class="javascript">function PrototypeClass() {
    this.property = "";
    this.method = function() { }
}
PrototypeClass.prototype.anotherMethod = function() { }
var instance = new PrototypeClass();
</code></pre>
                <div class='balloon' style='width:450px; position:absolute; left:-100px;'>
                    <p style='padding-top:125px'>Why can't we use classes. I know classes.</p>
                    <img src="img/balloon.png" class='flip'/>
                </div>
                <div class='balloon' style='width:300px; position:relative; left:550px;'>
                    <p>What is this?</p>
                    <img src="img/balloon.png" class='rotate-180'/>
                </div>
            </div>

            <div class="step" data-x="1385" data-y="180" data-scale="0.05" data-rotate="-90">

<pre><code class="javascript">PLACEHOLDER
class SkinnedMesh extends THREE.Mesh {
  constructor(geometry, materials) {
    super(geometry, materials);

    this.idMatrix = SkinnedMesh.defaultMatrix();
    this.bones = [];
    this.boneMatrices = [];
    //...
  }
  update(camera) {
    //...
    super.update();
  }
  static defaultMatrix() {
    return new THREE.Matrix4();
  }
}</code></pre>
            </div>

            <div class="step example" data-x="1450" data-y="180" data-scale="0.05" data-rotate="-90">
                <h3>Classes: compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> n/a
                <td><img src='img/chrome.png'> n/a
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> n/a
                <td><img src='img/safari.png'>n/a
                <tr class='notes'>
                <td>
                <td>
                <td>Available in "Technical Preview" using "Experimental Web Platform Features"
                <td>
                </table>
            </div>

            <div class="step" data-x="1305" data-y="255" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Arrow functions</h1>
                <hr />
            </div>

            <div class="step" data-x="1330" data-y="255" data-scale="0.05" data-rotate="-90">
                <h2>Problem: |this| is dynamic scoped</h2>
<pre><code class="javascript">function Archer() {
    this.arrows = 100;

    setInterval(function shoot() {
        this.arrows--;
    }, 5 * 1000);
}

var a1 = new Archer();</code></pre>
            </div>

            <div class="step" data-x="1375" data-y="255" data-scale="0.05" data-rotate="-90">
                <h2>Solution 1: lexical alias to |this|</h2>
<pre><code class="javascript">function Archer() {
    <em>var self = this;</em>
    this.arrows = 100;

    setInterval(function shoot() {
        <em>self</em>.arrows--;
    }, 5 * 1000);
}

var a1 = new Archer();</code></pre>
                <h2>Solution 2: bind the callback function</h2>
<pre><code class="javascript">function Archer() {
    this.arrows = 100;

    setInterval(function shoot() {
        this.arrows--;
    }.<em>bind(this)</em>, 5 * 1000);
}

var a1 = new Archer();</code></pre>
            </div>

            <div class="step" data-x="1410" data-y="255" data-scale="0.05" data-rotate="-90">
                <h2>New solution: arrow functions</h2>
<pre><code class="javascript">function Archer() {
    this.arrows = 100;

    setInterval(<em>() => {</em>
        this.arrows--;
    <em>}</em>, 5 * 1000);
}

var a1 = new Archer();</code></pre>
                <div>
                    https://github.com/DavidBruant/ECMAScript-regrets#wrong-this-in-callbacks<br />
                    based on C# and CoffeeScript<br />
                    shorter syntax for a function expressions that lexically binds the this value
                </div>
            </div>

            <div class="step" data-x="1435" data-y="255" data-scale="0.05" data-rotate="-90">
            <h2>Syntax: arrow functions</h2>
<pre><code class="javascript">([param] [, param]) => {
    statements
}

param => expression
</code></pre>
            </div>
            <div class="step" data-x="1460" data-y="255" data-scale="0.05" data-rotate="-90">
            <h2>Examples</h2>
<pre><code class="javascript">// 1. Basic
(x, y) => {
    return x+y
}

// 2. No return needed (for single expressions)
(x, y) => x+y

// 3. No parentheses (for one argument)
x => Math.pow(x, 2);

// 4. Or
x => {
    return Math.pow(x, 2);
}

// 5. No arguments
() => Math.random()


// 6. Compare
function ListDecorator(items) {
    this.items = items;
}
ListDecorator.prototype.sortedKeys() {
    var keys = Object.keys(this.items);
    keys.sort( (key1, key2) => {
        return this.items[key1] - this.items[key2];
    } )
}

var ld = new ListDecorator([200, 123, 200]);
ld.sortedKeys();</code></pre>
            </div>

            <div class="step example" data-x="1505" data-y="255" data-scale="0.05" data-rotate="-90">
                <h3>Arrow functions: compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> 23
                <td><img src='img/chrome.png'> n/a
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> n/a
                <td><img src='img/safari.png'>n/a
                <tr class='notes'>
                <td>Released one and a half year ago<!-- August 6, 2013 -->
                <td>
                <td>Available in "Technical Preview" using "Experimental Web Platform Features"
                <td>
                </table>
            </div>

            <div class="step" data-x="1305" data-y="330" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Destructuring</h1>
                <hr />
                <p>The destructuring assignment syntax is a JavaScript expression that makes it possible to extract data from arrays or objects using a syntax that mirrors the construction of array and object literals.</p>
            </div>
            <div class="step" data-x="1345" data-y="330" data-scale="0.05" data-rotate="-90">
                <h2>Destructuring: List matching.</h2>
<pre><code class="javascript">
var [a, b] = [1, 2];
// a = 1, b = 2

var [a, , b] = [1,2,3];
// a = 1, b = 3

var [a, b, ...c] = [1, 2, 3, 4, 5];
// a = 1, b = 2, c = [3, 4, 5]

var [b, a] = [a, b]
// swaps the content of a and b</code></pre>

            </div>
            <div class="step" data-x="1365" data-y="330" data-scale="0.05" data-rotate="-90">
                <h2>Destructuring: Object matching.</h2>
<pre><code class="javascript">// object matching
var { op: a, lhs: { op: b }, rhs: c }
       = getASTNode()

// object matching shorthand
// binds `op`, `lhs` and `rhs` in scope
var {op, lhs, rhs} = getASTNode()</code></pre>

            </div>
            <div class="step" data-x="1400" data-y="330" data-scale="0.05" data-rotate="-90">
                <h2>Destructuring: Useable in parameter position.</h2>
<pre><code class="javascript">function g({name: x}) {
  console.log(x);
}
g({name: 5})</code></pre>

            </div>
            <div class="step" data-x="1425" data-y="330" data-scale="0.05" data-rotate="-90">
                <h2>Destructuring: Using defaults.</h2>
<pre><code class="javascript">// Fail-soft destructuring
var [a] = [];
a === undefined;

// Fail-soft destructuring with defaults
var [a = 1] = [];
a === 1;</code></pre>

            </div>
            <div class="step example" data-x="1450" data-y="330" data-scale="0.05" data-rotate="-90">
                <h3>Destructuring: compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> 34
                <td><img src='img/chrome.png'> n/a
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> n/a
                <td><img src='img/safari.png'>7.1
                <tr class='notes'>
                <td>Released 2 months ago<!-- December 1, 2014 -->
                <td>
                <td>
                <td>
                <td>Released 5 monts ago<!-- September 18, 2014 -->
                </table>
            </div>

            <div class="step" data-x="1305" data-y="400" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Modules</h1>
                <div>
                One of the first challenges developers new to JavaScript who are building large applications will have to face is how to go about organizing their code. Most start by embedding hundreds of lines of code between a &lt;script> tag which works but quickly turns into a mess. The difficultly is that JavaScript doesn’t offer any obvious help with organizing our code. Literally where C# has using, Java has import - JavaScript has nothing. This has forced JavaScript authors to experiment with different conventions and to use the language we do have to create practical ways of organizing large JavaScript applications.
                </div>
</div>
            <div class="step" data-x="1335" data-y="400" data-scale="0.05" data-rotate="-90">
            <h2>Module pattern</h2>
                <hr />
<pre><code class="javascript">var MODULE = (function () {
    var module = {};
    var privateProperty = 1;

    function privateMethod() {
        // ...
    }

    module.publicProperty = 1;
    module.publicMethod = function () {
        // ...
    };

    return module;
}());</code></pre>
            </div>

            <div class="step example" data-x="1350" data-y="400" data-scale="0.05" data-rotate="-90">
                <h3>Modules: compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> n/a
                <td><img src='img/chrome.png'> n/a
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> n/a
                <td><img src='img/safari.png'> n/a
                <tr class='notes'>
                <td>
                <td>
                <td>
                <td>
                <td>
                </table>
            </div>

            <div class="step" data-x="1312" data-y="480" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Symbols</h1>
                <hr />
                <p class='blue large'>A new primitive type!</p>
                <p style='font-size:50px; margin-top:250px'>
                    <img src='img/thinking-caveman.png' width='140px'/>
                    Undefined, Null, Boolean, String and Number
                </p>
            </div>

            <div class="step" data-x="1360" data-y="480" data-scale="0.05" data-rotate="-90">
                <h2>Symbols: What?</h2>
                <p>Unique IDs</p>

                <h2>Symbols: Syntax</h2>
<pre><code class="javascript">Symbol([description])</code></pre>
            </div>

            <div class="step" data-x="1400" data-y="480" data-scale="0.05" data-rotate="-90">
                <h2>Unique accessers</h2>
<pre><code class="javascript">document.getElementById("test")["visited"] = true;
// Clashes if another library by accident also uses "visited".

var visited_symbol = Symbol("cached");
document.getElementById("test")[visited_symbol] = true;
// Will never clash.</code></pre>
            </div>

            <div class="step example" data-x="1425" data-y="480" data-scale="0.05" data-rotate="-90">
                <h3>Symbols: Compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> 36
                <td><img src='img/chrome.png'> 38
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> 25
                <td><img src='img/safari.png'> n/a
                <tr class='notes'>
                <td>Releases this month
                <td>Released 4 months ago
                <td>Available in "Technical Preview" using "Experimental Web Platform Features"
                <td>Released 4 months ago<!-- October 15, 2014 -->
                <td>
                </table>
            </div>

            <div class="step" data-x="1305" data-y="555" data-scale="0.05" data-rotate="-90">
                <h1>ES6: Promises</h1>
                <p>Abstraction for Async code</p>
                <hr />
            </div>

            <div class="step" data-x="1345" data-y="555" data-scale="0.05" data-rotate="-90">
                <h2>Problem</h2>
                <p>JS executes sequentially and blocks all other execution</p>

<p class='middle blue center'>Easiest to reason about</p>

<pre class='substep'><code class="javascript">while (true) {
    // Crunch some data.
}</code></pre>


            <img src='img/slowscript.gif' class='center substep' />

<pre class='substep'><code class="javascript">// Make sure first image is loaded
var img = document.getElementsByTagName("img")[0]
while (!img.complete) {
    // not yet completed
}
// Completed, now we can do something with it.</code></pre>

            </div>

            <div class="step" data-x="1375" data-y="555" data-scale="0.05" data-rotate="-90">
                So we need async behaviour. To give time to other resources.

<p class='middle blue center'>Enter events and continuation functions</p>

<pre class='substep'><code class="javascript">// Make sure first image is loaded
var img = document.getElementsByTagName("img")[0]
img.onload = function() {
    // Completed, now we can do something with it.
}</code></pre>
<p class='middle blue center'>What if img was already loaded?</p>
<p class='center'>Just add some more code. DUH!</p>
<pre class='substep'><code class="javascript">if (img.completed) {
    img.onload();// Make sure first image is loaded
}</code></pre>

Notice the small annoyincies. More code. Need to look up onload and find completed.
            </div>

            <div class="step" data-x="1400" data-y="555" data-scale="0.05" data-rotate="-90">
                <h2>Promises</h2>
                <p>the idea is to make this simpler with promises and have some nice tools around it.</p>

                <h2>Syntax</h2>
<pre><code class="javascript">
function executor(resolve, reject) {
    /* do something */

    if (/* fail */)
        reject(); // Bonus, will also get called upon Error.

    /* done */
    resolve();
}

var promise = new Promise(executor);

promise.then(function() {
    /* Let's do something with the result. */
}, function() {
    /* Failed. */
})
</code></pre>

           </div>
           <div class="step" data-x="1430" data-y="555" data-scale="0.05" data-rotate="-90">

<pre><code class="javascript">var img = document.getElementsByTagName("img")[0]
ready = img.getReadyPromise() // imagine this exists.
ready.then(function() {
    // Completed, now we can do something with it.
})</code></pre>

            </div>


            <div class="step" data-x="1450" data-y="555" data-scale="0.05" data-rotate="-90">
            <h2>Promise Example: Chaining</h2>

<pre><code class="javascript">var imgs = document.getElementsByTagName("img")
ready = imgs[0].getReadyPromise() // imagine this exists.
ready.then(function() {
    return imgs[1].getReadyPromise();
}).then(function() {
    // both images are loaded.
});</code></pre>

            </div>

            <div class="step" data-x="1470" data-y="555" data-scale="0.05" data-rotate="-90">
            <h2>Promise Example: Parallel testing of multiple promises</h2>

<pre><code class="javascript">var imgs = document.getElementsByTagName("img")
var promises = [ imgs[0].getReadyPromise(), imgs[1].getReadyPromise() ]
Promise.all(promises).then(function() {
    // Both images are loaded.
})</code></pre>

            </div>
            <div class="step example" data-x="1490" data-y="555" data-scale="0.05" data-rotate="-90">
                <h3>Promises: Compatibility</h3>
                <table class='compatibility'>
                <tr class='browser'>
                <td><img src='img/firefox.png'> 29
                <td><img src='img/chrome.png'> 32
                <td><img src='img/ie.png'> n/a
                <td><img src='img/opera.png'> 19
                <td><img src='img/safari.png'> 7.1
                <tr class='notes'>
                <td>Released 9 months ago<!-- April 29, 2014 -->
                <td>Released 1 year ago<!-- 2014-01-15 -->
                <td>Available in "Technical Preview" using "Experimental Web Platform Features"
                <td>Released 1 year ago<!-- January 28, 2014-->
                <td>Released 5 monts ago<!-- September 18, 2014 -->
                </table>
            </div>


            <div id="overview" class="step" data-x="1000" data-y="100" data-scale="1.5">
            </div>

        </div>

        <script src="highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <script type="text/javascript" src="impress.js"></script>
        <!--
            call `impress().init()` function to initialize impress.js presentation.
        -->
        <script>impress().init();</script>
    </body>
</html>
